<script setup>
	// Import Swiper Vue.js components
	import { Swiper, SwiperSlide } from 'swiper/vue';


	// Import Swiper styles
	import 'swiper/css';

	// import required modules
	import { Pagination, Navigation, Thumbs } from 'swiper';

	import img1 from '~/assets/img/product-card/1.png';
	import img2 from '~/assets/img/product-card/2.png';
	import img3 from '~/assets/img/product-card/3.png';
	import img4 from '~/assets/img/product-card/4.png';
	import img5 from '~/assets/img/product-card/5.png';
	import img6 from '~/assets/img/product-card/6.png';
	import img7 from '~/assets/img/product-card/6.png';

	defineProps({
		premium: {
			type: Boolean,
			default: false,
		},
	});

	const images = ref([img1, img2, img3, img4, img5, img6, img7]);

	// swiper

	const swiperBtn = ref(null);
	const thumbsSwiper = ref(null);

	const totalImg = computed(() => images.value.length);
	const currentImg = computed(() => swiperBtn.value?.realIndex + 1);

	function getRef(swiperInstance) {
		swiperBtn.value = swiperInstance;
	}

	function next() {
		swiperBtn.value.slideNext();
	}
	function prev() {
		swiperBtn.value.slidePrev();
	}
	function setThumbsSwiper(swiper) {
		thumbsSwiper.value = swiper;
	}
	function slideTo(idx) {
		swiperBtn.value.slideTo(idx);
	}
</script>

<template>
	<div class="product-card-swiper">
		<swiper @swiper="getRef" class="product-swiper">
			<swiper-slide v-for="(item, idx) in 7">
				<div class="product-card-swiper__main">
					<img
						class="product-card-swiper__bg"
						src="~/assets/img/product-card/card-swiper.jpg"
						alt=""
					/>

					<img
						src="~/assets/img/product-card/logo.png"
						alt=""
						class="product-card-swiper__logo pos"
					/>
					<div class="product-card-swiper__play pos" v-if="premium">
						<img src="~/assets/img/product-card/play.svg" alt="" />
					</div></div
			></swiper-slide>
			<div
				class="product-card-swiper__arrow arrow-left pos"
				v-if="premium"
				@click="prev"
			>
				<IconArrow class="fill" />
			</div>
			<div
				class="product-card-swiper__arrow arrow-right pos"
				@click="next"
				v-if="premium"
			>
				<IconArrow />
			</div>
			<UISliderButton
				:current="currentImg"
				:max="totalImg"
				class="product-card-swiper__count pos"
				v-if="premium"
			/>
		</swiper>

		<swiper
			@swiper="setThumbsSwiper"
			:spaceBetween="5"
			:watchSlidesProgress="true"
			class="product-card-swiper-small"
		>
			<swiper-slide v-for="(item, idx) in 7" v-if="premium">
				<div class="product-card-swiper__thumbnail">
					<img
						@click="slideTo(idx)"
						:src="images[idx]"
						alt=""
						:class="{
							active: idx === swiperBtn?.realIndex,
						}"
					/>
				</div>
			</swiper-slide>
		</swiper>
	</div>
</template>

<style lang="scss">

</style>
